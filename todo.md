# SO Alpha 积分管理后台 - 功能清单

## 数据库设计
- [x] 设计用户积分表
- [x] 设计工单表（P_Genesis）
- [x] 设计直播数据表（P_Eco）
- [x] 设计交易数据表（P_Trade）
- [x] 设计结算记录表
- [x] 设计操作日志表
- [x] 设计核心身份白名单表

## 后端功能
- [x] 实现总览仪表盘数据查询
- [x] 实现P_Genesis工单管理路由
- [x] 实现P_Eco直播监控路由
- [x] 实现P_Trade交易账本路由
- [x] 实现结算中心路由
- [x] 实现用户管理路由
- [x] 实现权限控制中间件

## 前端功能

### 1. 总览仪表盘
- [x] 总积分池消耗进度展示
- [x] 分池产出占比饼图（P_Genesis/P_Eco/P_Trade）
- [x] 今日新增积分统计
- [x] 参与用户数统计
- [x] 每日积分发放趋势折线图
- [x] 核心指标趋势图表

### 2. P_Genesis管理板块
- [x] 工单列表（待审核队列）
- [x] 工单类型筛选（Bug/建议/必要信息）
- [x] 审核详情弹窗
- [x] P0-P3定级打分器
- [x] 人工修正分数功能
- [x] 核心身份白名单管理
- [x] 自动发放开关

### 3. P_Eco直播监控台
- [x] 主播数据监控列表
- [x] 异常标记（挂机检测）
- [x] CCU采样详情页
- [x] CCU心电图可视化
- [x] 精选内容池管理
- [x] 内容加精功能（*3倍数奖励）

### 4. P_Trade交易积分账本
- [x] 交易积分明细列表
- [x] 手续费贡献统计
- [x] 持仓时长统计
- [x] 有效开单数统计
- [x] 风控过滤器（自我对敲检测）
- [x] 可疑用户标记
- [x] 积分冻结功能

### 5. 结算与发放中心
- [x] 每日预估视图（T-1数据）
- [x] 数据回滚功能
- [x] 数据重算功能
- [x] 周结算操作台
- [x] 生成周报表
- [x] 异常校对列表
- [x] 手动补录/扣除功能
- [x] 确认发放功能

### 6. 用户管理系统
- [x] 用户列表展示
- [x] 用户搜索功能
- [x] 积分历史记录
- [x] 身份标签管理（OG/核心主播/专业交易员）
- [x] 用户详情页

### 7. 权限管理
- [x] 管理员角色控制
- [x] 操作日志记录
- [x] 敏感操作二次确认

## 测试与部署
- [x] 生成模拟数据
- [x] 功能测试
- [ ] 保存检查点
- [ ] 部署上线

## Bug修复
- [x] 修复settlements.latest API返回undefined错误
- [x] 修复SQL查询语法错误（GROUP BY列名问题）

## 用户可视化编辑
- [x] 更新Dashboard页面文案（通过可视化编辑器）
  - 已结算积分：更新说明文案
  - 今日新增积分：标题优化
  - 今日活跃用户：更新为"参与贡献获得积分的人数"
  - 各个池积分占比：添加详细说明
  - 每日积分发放趋势：标题添加"折线图"标识

## Tickets页面优化
- [x] 优化工单列表表头文案（通过可视化编辑器）
  - "工单列表" → "反馈工单列表"
  - "ID" → "UID"
  - "类型" → "内容"
  - "标题" → "工单号"
  - "优先级" → "BUG等级（可修改）"
  - "积分" → "释放积分"

## 大规模系统优化

### 1. 积分配置管理
- [x] 设计积分配置表schema（阶段、周期、池子比例、规则等）
- [x] 实现积分配置管理页面
- [x] 添加配置CRUD功能
- [x] 在导航栏添加“积分配置”入口

###### 2. 总览仪表盘优化
- [x] 添加周环比、月环比数据显示
- [x] 添加增长率指标卡片
- [x] 增加周期段选择（S0/S1/S2）
- [x] 增加累计参与积分贡献人数卡片
- [x] 调整分池产出占比逻辑
- [x] 增加核心指标趋势（12个维度）指标趋势图表（每日、累积）
  - 参与积分贡献人数
  - 直播时长
  - 打赏人数、打赏金额
  - 发帖人数、发帖数、精品贴数
  - 现货交易量、手续费
  - 合约交易量、手续费
  - Bug提交数

### 3. P_Eco直播监控台优化
- [ ] 实现Score_Audience计算逻辑
  - 打赏金额手续费 * 5
  - 有效观看时长 * 1
  - 有效聊天条数 * 0.2
  - 精选内容贴数 * 5
- [ ] 实现Score_Creator计算逻辑
  - 日有效直播时长 * 5
  - 平均CCU * 3
  - 有效聊天条数 * 0.2
  - 收到打赏手续费 * 1
  - 精选内容贴数 * 5
- [ ] 实现CCU采样逻辑（90秒间隔）
- [ ] 添加普通观众贡献数据统计表
- [ ] 优化直播监控台数据维度展示

### 4. P_Trade交易账本优化
- [ ] 实现积分冻结功能
- [ ] 添加冻结记录下钻查看
- [ ] 显示冻结记录详细数据

### 5. 通用功能优化
- [ ] 添加筛选器组件（类型、状态、等级、日期范围）
- [ ] 添加搜索框组件（工单号、UID、提交人等）
- [ ] 应用筛选和搜索到所有列表页面
### 7. 数据生成
- [x] 创建10000用户模拟数据生成脚本
- [x] 模拟完整的S0 Alpha周期数据
- [x] 生成真实感的业务数据%）
- [ ] 生成创世积分池数据（30%）
- [ ] 积分精确到小数点后两位

### 7. 导出功能
- [ ] 实现Excel/CSV导出工具函数
- [ ] 为结算报表添加导出功能
- [ ] 为用户积分历史添加导出功能
- [ ] 为其他关键数据表添加导出功能
